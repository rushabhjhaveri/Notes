# Amazon S3 Introduction # 

## S3 Overview ## 

Amazon S3 is one of the main building blocks of AWS 

Advertised as "infinitely scaling" storage 

Many websites use S3 as a backbone 

Many AWS services use S3 as an integration as well 

### S3 - Buckets ### 

S3 allows for the storage of objects [files] in "buckets" [directories] 

Buckets must have a globally unique name [across all regions all accounts] 

Buckets are defined at the region level 

S3 looks like a global service but buckets are created in a region 

Naming convention: 
* no uppercase, no underscore 
* 3-63 characters long 
* not an IP 
* must start with a lowercase letter or number 
* must not start with the prefix xn-- 
* must not end with the suffix -s3alias 

### S3 - Objects ### 

Objects [files] have a Key 

The key is the full path 
* s3://my-bucket/my_file.txt 

The key is composed of prefix + object name 

There is no concept of directories within buckets 

Just keys with very long names that contain slashes 

Object values are the content of the body 

Max object size is 5TB 

If uploading more than 5 GB, must use multi-part upload 

Metadata [list of text key/value pairs - system or user metadata] 

Tags [unicode key/value pair - up to ten] - useful for security/lifecycle 

Version ID [if versioning is enabled] 

## S3 Security - Bucket Policy ## 

User-based: IAM Policies - which API calls should be allowed for a specific user from IAM 

Resource-Based: 
* Bucket Policies - bucket-wide rules from the S3 console - allows cross-account access 
* Object Access Control List [ACL] - finer-gran [can be disabled] 
* Bucket ACL - less common [can be disabled] 

Note: an IAM principal can access an S3 object if the user's IAM permissions allow it or the resource policy allows it AND there's no explicit deny 

Encyption: encrypt objects in S3 using encryption keys 

### S3 Bucket Policies ### 

JSON-based policies 

Resources: buckets and objects 

Effect: allow/deny 

Actions: set of API to allow/deny 

Principal: the account or user to apply the policy to 

Use S3 bucket for policy to grant public access to the bucket, and to force objects to be encrypted at upload 